
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Shiza ðŸŽ‰</title>

<style>
/* Reset and General Styles */
*{box-sizing:border-box}

body{
    margin:0;
    min-height:100vh;
    background:#000;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    /* Updated font-family for better emoji support */
    font-family: Arial, sans-serif, "Segoe UI Emoji", "Noto Color Emoji", "Apple Color Emoji"; 
    padding:20px;
}

/* ---------- CANVAS ---------- */
canvas{
    position:fixed;
    inset:0;
    z-index:1;
}

/* ---------- MAIN WRAPPER ---------- */
.wrapper{
    position:relative;
    z-index:5;
    text-align:center;
    width:100%;
}

/* ---------- CAKE ---------- */
.real-cake-wrapper{
    position:relative;
    display:flex;
    justify-content:center;
    margin-bottom:20px;
}

svg{
    max-width:320px;
    width:100%;
    height:auto;
    transition: transform 0.5s ease;
}

/* ---------- BLOW EFFECT (NEW ELEMENT) ---------- */
#blowEffect {
    position: absolute;
    font-size: 50px; /* Made bigger for visibility */
    opacity: 0;
    right: 50%; /* Start in the middle */
    top: 50px; /* Position above the cake */
    transform: translateX(50%);
    transition: all 0.5s ease-out;
    z-index: 10;
}

/* Blow animation class (controlled by JS) */
.blow-active {
    opacity: 1;
    right: 58%; /* Moved more to the left to simulate a face blowing */
    transform: translateX(50%) scale(1.3);
}

/* ---------- CANDLES (UNCHANGED) ---------- */
.candle{
    position:absolute;
    width:8px;
    height:40px;
    background:#333;
    border-radius:2px;
    bottom:110px;
    transition: opacity 0.5s;
}

.c1{left:46%}
.c2{left:50%}
.c3{left:54%}

/* ---------- FLAME (UNCHANGED) ---------- */
.flame{
    position:absolute;
    top:-32px;
    left:50%;
    transform:translateX(-50%);
    width:18px;
    height:32px;
    background:radial-gradient(circle at 50% 25%,
        #fff 10%,
        #ffe066 30%,
        #ff9f1a 55%,
        #ff5e00 75%,
        transparent 85%);
    border-radius:50%;
    animation:flicker .12s infinite alternate;
    box-shadow:0 0 30px rgba(255,150,0,1);
    transition: opacity 1.5s ease-out;
}

@keyframes flicker{
    0%{transform:translateX(-50%) scale(.9)}
    100%{transform:translateX(-50%) scale(1.1)}
}

/* ---------- PIXEL TEXT (UNCHANGED) ---------- */
.text{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:12px;
}

.line{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    justify-content:center;
}

.letter{
    display:grid;
    grid-template-columns:repeat(5,10px);
    grid-template-rows:repeat(7,10px);
    gap:2px;
}

.pixel{
    width:10px;
    height:10px;
    background:#ffeb3b;
    opacity:0;
    transform:translateY(-40px);
    transition:.4s ease;
    box-shadow:0 0 6px #ffcc00;
}

/* ---------- BLOW BUTTON (UNCHANGED) ---------- */
#blowButton {
    background: linear-gradient(145deg, #e6b800, #ffcc00);
    border: none;
    padding: 10px 20px;
    margin-top: 30px;
    color: #333;
    font-weight: bold;
    font-size: 1.1em;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(255, 204, 0, 0.4), 0 1px 3px rgba(0, 0, 0, 0.2);
    transition: all 0.3s;
    z-index: 10;
}

#blowButton:hover {
    background: linear-gradient(145deg, #ffcc00, #e6b800);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 204, 0, 0.6);
}

#blowButton:active {
    transform: translateY(1px);
    box-shadow: 0 2px 10px rgba(255, 204, 0, 0.3);
}

/* ---------- MOBILE OPTIMIZATION (UNCHANGED) ---------- */
@media(max-width:480px){
    .wrapper {
        padding-top: 50px;
    }
    .letter{
        grid-template-columns:repeat(5,7px);
        grid-template-rows:repeat(7,7px);
        gap: 1px;
    }
    .pixel{width:7px;height:7px}
    .line {
        gap: 6px;
    }
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div class="wrapper">

    <div class="real-cake-wrapper">
        <div id="blowEffect"></div>
        <svg id="cakeSvg" viewBox="0 0 360 300">
            <ellipse cx="180" cy="265" rx="150" ry="18" fill="#eaeaea"/>
            <rect x="60" y="145" width="240" height="105" rx="22" fill="#fff"/>
            <rect x="60" y="120" width="240" height="40" rx="22" fill="#4a2a1a"/>
            <path d="M60 145
            C90 170 120 145 150 165
            C180 185 210 145 240 165
            C270 185 300 155 300 145"
            fill="#4a2a1a"/>
        </svg>

        <div class="candle c1"><div class="flame"></div></div>
        <div class="candle c2"><div class="flame"></div></div>
        <div class="candle c3"><div class="flame"></div></div>
    </div>

    <div class="text">
        <div class="line" id="line1"></div>
        <div class="line" id="line2"></div>
        <div class="line" id="line3"></div>
    </div>

    <button id="blowButton">Blow Out Candles ðŸ’¨</button>

</div>

<script>
/* ---------- PIXEL TEXT (UNCHANGED) ---------- */
const letters={
H:["10101","10101","11111","10101","10101","10101","10101"],
A:["01110","10001","11111","10001","10001","10001","10001"],
P:["11110","10001","11110","10000","10000","10000","10000"],
Y:["10001","10001","01010","00100","00100","00100","00100"],
B:["11110","10001","11110","10001","10001","10001","11110"],
I:["11111","00100","00100","00100","00100","00100","11111"],
R:["11110","10001","11110","10100","10010","10001","10001"],
T:["11111","00100","00100","00100","00100","00100","00100"],
S:["01111","10000","01110","00001","00001","10001","01110"],
Z:["11111","00001","00010","00100","01000","10000","11111"],
" ":["00000","00000","00000","00000","00000","00000","00000"]
};

function drawText(text, el, delay){
    [...text].forEach(ch=>{
        const l=document.createElement("div");
        l.className="letter";
        if(letters[ch]){
            letters[ch].forEach(r=>{
                [...r].forEach(b=>{
                    const p=document.createElement("div");
                    if(b==="1"){
                        p.className="pixel";
                        setTimeout(()=>{p.style.opacity=1;p.style.transform="translateY(0)"},delay);
                        delay+=18;
                    }
                    l.appendChild(p);
                });
            });
            el.appendChild(l);
        }
    });
}

const line1 = document.getElementById("line1");
const line2 = document.getElementById("line2");
const line3 = document.getElementById("line3");
drawText("HAPPY ", line1, 0);
drawText("BIRTHDAY", line2, 400);
drawText("SHIZA", line3, 900);


/* ---------- CANDLE BLOWING LOGIC (UPDATED) ---------- */
const blowButton = document.getElementById("blowButton");
const blowEffect = document.getElementById("blowEffect");
const flames = document.querySelectorAll('.flame');
let hasBeenBlown = false;

blowButton.addEventListener('click', () => {
    if (hasBeenBlown) return;

    hasBeenBlown = true;
    blowButton.textContent = "ðŸ¥³ Happy Birthday!";
    blowButton.disabled = true;

    // 1. Show the Blow Emoji (Simplified the emoji to just the blowing face)
    blowEffect.textContent = 'ðŸ˜—'; 
    blowEffect.classList.add('blow-active');

    // 2. Extinguish Flames with a short delay
    setTimeout(() => {
        flames.forEach(flame => {
            // Remove flicker animation
            flame.style.animation = 'none'; 
            // Start the transition to transparent
            flame.style.opacity = 0; 
        });
        document.querySelectorAll('.candle').forEach(c => c.style.opacity = 0.8);

        // 3. Hide the blow effect after the flames are mostly out
        setTimeout(() => {
            // Change to a smiling face after blowing (just before hiding)
            blowEffect.textContent = 'ðŸ˜Š'; 
            setTimeout(() => {
                blowEffect.style.opacity = 0;
            }, 300); // Small delay to show the smiling face
        }, 1200);

    }, 500);
});


/* ---------- FIREWORKS CODE (UNCHANGED) ---------- */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let cw = canvas.width = window.innerWidth;
let ch = canvas.height = window.innerHeight;

window.addEventListener("resize", () => {
    cw = canvas.width = window.innerWidth;
    ch = canvas.height = window.innerHeight;
});

let fireworks = [];
let particles = [];
let hue = 0;

function random(min, max) {
    return Math.random() * (max - min) + min;
}

function Firework(x, y, tx, ty) {
    this.x = x;
    this.y = y;
    this.tx = tx;
    this.ty = ty;
    this.angle = Math.atan2(ty - y, tx - x);
    this.speed = 4;
}

Firework.prototype.update = function (i) {
    this.x += Math.cos(this.angle) * this.speed;
    this.y += Math.sin(this.angle) * this.speed;

    if (Math.hypot(this.tx - this.x, this.ty - this.y) < 15) {
        for (let j = 0; j < 50; j++) {
            particles.push(new Particle(this.x, this.y));
        }
        fireworks.splice(i, 1);
    }
};

Firework.prototype.draw = function () {
    ctx.beginPath();
    ctx.moveTo(this.x, this.y);
    ctx.lineTo(this.x - 6, this.y - 6);
    ctx.strokeStyle = `hsl(${hue},100%,60%)`;
    ctx.lineWidth = 2;
    ctx.lineCap = "round";
    ctx.stroke();
};

function Particle(x, y) {
    this.x = x;
    this.y = y;
    this.angle = random(0, Math.PI * 2);
    this.speed = random(2, 8);
    this.alpha = 1;
    this.decay = random(0.015, 0.03);
}

Particle.prototype.update = function (i) {
    this.x += Math.cos(this.angle) * this.speed;
    this.y += Math.sin(this.angle) * this.speed + 0.6;
    this.alpha -= this.decay;
    if (this.alpha <= 0) particles.splice(i, 1);
};

Particle.prototype.draw = function () {
    ctx.beginPath();
    ctx.moveTo(this.x, this.y);
    ctx.lineTo(this.x + 3, this.y + 3);
    ctx.strokeStyle = `hsla(${hue},100%,60%,${this.alpha})`;
    ctx.lineWidth = 2;
    ctx.stroke();
};

/* ---------- ANIMATION LOOP (UNCHANGED) ---------- */
function animate() {
    requestAnimationFrame(animate);

    ctx.globalCompositeOperation = "destination-out";
    ctx.fillStyle = "rgba(0,0,0,0.35)";
    ctx.fillRect(0, 0, cw, ch);
    ctx.globalCompositeOperation = "lighter";

    hue += 0.8;

    fireworks.forEach((f, i) => {
        f.draw();
        f.update(i);
    });

    particles.forEach((p, i) => {
        p.draw();
        p.update(i);
    });

    // Launch fireworks from the bottom of the screen to a random point in the upper half
    if (Math.random() < 0.04) {
        fireworks.push(
            new Firework(
                random(50, cw - 50),
                ch,
                random(100, cw - 100),
                random(50, ch / 2)
            )
        );
    }
}

animate();
</script>

</body>
</html>